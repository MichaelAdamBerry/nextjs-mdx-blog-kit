import BlogMeta from "../../components/BlogMeta";
import BlogHeroImg from "../../components/layouts/BlogHeroImg";
import imgUrl from "../../static/images/there-will-be-blood.jpg";
import {
  MonsterData,
  CreateContext,
  AppOne,
  ProfileComponent,
  CurrentMonster,
  Button,
  FullDemoCode
} from "../../code-snippets/useContext/Examples";
import Demo from "../../code-snippets/useContext/Demo";

export const meta = {
  title: "useContext() Hook in React",
  // the first tag below will be used in <meta property="article:tag" content="first-tag" />
  tags: ["React", "Hooks", "Context"],
  layout: "post",
  publishDate: "2019-10-22",
  modifiedDate: false, // "If used it must be in 'YYYY-MM-DD format' like publishDate"
  seoDescription: "Overview of how React useContext Hook works",
  exclude: false,
  hideProgressBar: true,
  kicker: "Avoid prop drilling with React Hooks and Context API"
};

<BlogMeta data={props} />
## What is Context?

Context in react is a way for components to access application state without needing pass props down through components.

### Prop Drilling

<BlogHeroImg
  src={imgUrl}
  alt={"Still from film 'There Will Be Blood'. Oil drill on fire"}
  caption={"'There Will Be Blood' - 2007"}
/>

I had already built a few application with React before I heard the term "Prop Drilling" and because at that point I had not yet learned Redux (another state management solution) I needed no further explanation.

Component composition in Javascript frameworks and design systems helps us break code up into smaller, bite sized, self-contained bits which is super helpful in creating readable, maintainable code.

As applications become more complex, components often need to access state that is located further away on the rendering tree. The solution would be to move the shared state to the nearest ancestor of both components and just "drill" state as a prop down through the component tree until you get to the component that needs it.

This means that a relatively minor change could require you to touch several files to alter components which is time consuming, annoying, and increases the chances for bugs.

With context we can declare that a piece of state will need to be accessed elsewhere and not as prop values from the parent component. This is especially helpful for application state that will be used globally and accessible to all components.

### The Context API

This example demonstrates how we can use context to toggle between to user states.

Here's our user data :

<MonsterData />

First we need to declare a variable to hold the React.createContext method and pass it some initial values.

<CreateContext />

Then we wrap our App component with the context provider.

<AppOne />

Note that our App component will need to track the state of the user so using the useState.

Next we make our profile component which has a heading as well as user specific detail which we will define in our CurrentMonster.

<ProfileComponent />

In our CurrentMonster we need to access our context data using the useContext functon and passing in our MonsterContext

<CurrentMonster />

We also want to make a component so we can update our context state.

<Button />

I added a little css and here's our end result.

<Demo />

You can check out the [Code Sandbox](https://codesandbox.io/s/usecontext-example-hs0sh) if you want to explore and play around with the code

Here's the full javascript code.

<FullDemoCode />
